<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Argparse: a user-friendly tool to write CLI interface | Banghao&#39;s Blog</title>
<meta name="keywords" content="argparse, yolov5">
<meta name="description" content="1. Introduction Hello fellows! Today I&rsquo;m excited to share insights about the argparse module, a robust and intuitive tool for creating command-line interfaces in Python. What makes argparse particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of argparse has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications.">
<meta name="author" content="Banghao Chi">
<link rel="canonical" href="https://biboyqg.github.io/blog/blog/argparse/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.1866187f0f870b01f3f44415d8137f4a43ff47cfd61c29b3d4fc3399d48c0995.css" integrity="sha256-GGYYfw&#43;HCwHz9EQV2BN/SkP/R8/WHCmz1PwzmdSMCZU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://biboyqg.github.io/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://biboyqg.github.io/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://biboyqg.github.io/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://biboyqg.github.io/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://biboyqg.github.io/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://biboyqg.github.io/blog/blog/argparse/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Argparse: a user-friendly tool to write CLI interface" />
<meta property="og:description" content="1. Introduction Hello fellows! Today I&rsquo;m excited to share insights about the argparse module, a robust and intuitive tool for creating command-line interfaces in Python. What makes argparse particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of argparse has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://biboyqg.github.io/blog/blog/argparse/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-03-08T07:38:30-05:00" />
<meta property="article:modified_time" content="2024-03-08T07:38:30-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Argparse: a user-friendly tool to write CLI interface"/>
<meta name="twitter:description" content="1. Introduction Hello fellows! Today I&rsquo;m excited to share insights about the argparse module, a robust and intuitive tool for creating command-line interfaces in Python. What makes argparse particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of argparse has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blogs",
      "item": "https://biboyqg.github.io/blog/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Argparse: a user-friendly tool to write CLI interface",
      "item": "https://biboyqg.github.io/blog/blog/argparse/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Argparse: a user-friendly tool to write CLI interface",
  "name": "Argparse: a user-friendly tool to write CLI interface",
  "description": "1. Introduction Hello fellows! Today I\u0026rsquo;m excited to share insights about the argparse module, a robust and intuitive tool for creating command-line interfaces in Python. What makes argparse particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of argparse has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications.",
  "keywords": [
    "argparse", "yolov5"
  ],
  "articleBody": "1. Introduction Hello fellows! Today I’m excited to share insights about the argparse module, a robust and intuitive tool for creating command-line interfaces in Python. What makes argparse particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of argparse has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications.\nBy utilizing this module, individuals who frequently work with reusable Python files can significantly save their time. It simplifies the configuration of these files without the need for in-depth analysis, which is vital for tasks such as data processing, cleaning, and even AI model training since once their workflows are established, changes of these files are typically limited to data positioning and manipulation methods. Hence, I believe all of us will find this module invaluable for enhancing efficiency in our operations.\n2. Examples To quickly acquaint you guys with this module, I’ll demonstrate through three concise examples designed to progressively enhance your understanding. As we move from basic to more complex scenarios, you’ll gain valuable knowledge about argparse and, ultimately, master the key concepts such as:\nHow we can design desired interfaces that fulfill our purpose. How to let arguments parsed into the file to be utilized in other functions calls. How to parse arguments into the file from terminal. How to integrate and create a streamline process for the arguments flow using argparse. 2.1 Example 1 # import the module. import argparse # The function that is designed to take in the arguments. def parse_args(): parser = argparse.ArgumentParser(description='Example 1 for design in argparse') parser.add_argument(\"-d\", \"--data\", default=\"pokemon_names_and_descriptions.csv\", type=str, help=\"Path to csv file\") parser.add_argument(\"-f\", \"--fill\", default=\"average\", type=str, choices=[\"average\", \"max\", \"min\", \"median\"], help=\"Fillna method\") opt = parser.parse_args() return opt # Then call this function to utilize the arguments obtained. def main(): opt = parse_args() print(opt) # Call the main function once the program runs. if __name__ == \"__main__\": main() # outputs: Namespace(data='pokemon_names_and_descriptions.csv', fill='average') In this example, we are going to learn how to design desired interfaces that fulfill our purpose starting with this small snippet of code. Typically, we define an extra function that will take in the value that are parsed in to the file, and call that function in our main function to get all the arguments.\nInside the parse_args() function, we first instanciate a parser object using argparse’s ArgumentParser method so that we can configure the parser and add argument to it in the following lines. The description argument inside it is used to provide the individuals who want to use this python file with a small description text, which will be illustrated more later.\nAfter the instantiation, we can configure the parser object by using its add_argument() method. Inside this method, there will be 7 main parameters that we need to specify:\nname_or_flags: Either the name of the argument or a list of strings (which is optional). action: The action that you want the program to carry out once it receives the argument from outside. default: The default value of the argument if not data is parsed in the file with respect to this argument. type: The type that you want the argument to be converted to once it is received by the program. choices: A list of the allowable values for the argument. required: Whether this argument is optional or required. help: A brief description text to show what the argument does. Among these 7 parameters, I’ll list a two bullet points to help you understand how to use these to create your own interfaces:\nThere are two types of string values that we can fill in name_or_flags, positional argument (which require an input from the user) and optional argument, where optional argument usually start with - or -- plus the name that you want and positional argument just with the name that you want. The default value of action would be \"store\" which simply just store the value that the user parse in. Another value of action that we usually use is \"store_true\", which means if the user parse this argument (the one that are filled in name_or_flags), then its value will be true (further explained in the second example). After absorb all the fundamental knowledge we can take a look at the place where we add our arguments.\nparser.add_argument(\"-d\", \"--data\", default=\"pokemon_names_and_descriptions.csv\", type=str, help=\"Path to csv file\") parser.add_argument(\"-f\", \"--fill\", default=\"average\", type=str, choices=[\"average\", \"max\", \"min\", \"median\"], help=\"Fillna method\") opt = parser.parse_args() # outputs: Namespace(data='pokemon_names_and_descriptions.csv', fill='average') The first line means that we add an argument named -d or --data. We then provide the default value, the type of the argument and a text that helps to describe this argument. The second line is similar, except that it limits the allowable values for this argument.\nThe outputs are a Namespace, which is an unique type in this module. The values inside of this object will be the values that the user parse in with respect to each argument, but some of they will be default if the user doesn’t parse the value of some argument into the file. What’s more, in case you are not familiar with with this Namespace object, we can transform it into a dictionary, which will be explained later in the following example.\nAfter the completion of the configuration, we can get all the arguments using parse_args() method, and utilize them for further use.\n2.2 Example 2 In this example, we focus on illustrating how to utilize the arguments obtained from the last example and bring them into actual practice.\n# import the modules. import argparse import time as t # The function that is designed to take in the arguments. def parse_args(): parser = argparse.ArgumentParser(description='Example 2 for using args in argparse') parser.add_argument(\"-e\", \"--epochs\", default=5, type=int, help=\"Number of epoch you want to run\") parser.add_argument(\"-i\", \"--iterations\", default=100, type=int, help=\"Number of iterations you want to run in each epoch\") parser.add_argument(\"-t\", \"--time\", default=0.03, type=float, help=\"Time you want each iteration in an epoch to run\") opt = parser.parse_args() return opt # Example code for training the model. def train_model(epochs, iterations, time): for epoch in range(epochs): for iteration in range(iterations): t.sleep(time) rate = (iteration + 1)/iterations process = int(rate*50) a = \"*\" * process b = \".\" * (50 - process) print(f\"\\rEpoch: {epoch + 1} [{a}-\u003e{b}] {int(rate*100)}%\", end=\"\") print() # Call the parse_args function to utilize # the arguments obtained in train_model function. def main(): opt = parse_args() print(f\"Argument confirm: [{opt.epochs}] epochs, [{opt.iterations}] iterations, [{opt.time}] time\") print(\"Start training in 3s...\") t.sleep(3) print(\"Start now!\") train_model(**vars(opt)) print(\"End training!\") # Call the main function once the program runs. if __name__ == \"__main__\": main() In the last example, we mention that most of us are not familiar with Namespace object, and therefore we need to find a way to transform it into common data structure like dictionary in Python to make use of it.\nIt turns out that there’s a built-in method vars which will calls the __dict__ method in the corresponding object to transform it into dictionary and return it. If we print vars(opt) in the main function, the outputs will be something like:\n# outputs: {'epochs': 5, 'iterations': 100, 'time': 0.03} Since Namespace is also a dict-liked object, we can access its member value by using . like this line of code:\nprint(f\"Argument confirm: [{opt.epochs}] epochs, [{opt.iterations}] iterations, [{opt.time}] time\") Then we can parse the dictionary as argument using ** operation, which is often referred as “Unpacking function arguments” into the goal function. Here, we parse the arguments obtained into train_model using train_model(**vars(opt)).`\nWith \\r functionality in print, we can achieve the outputs of the Example 2 as follow once we run the file in the terminal:\n2.3 Example 3 In this section we mainly focus on introducing the use of store_true and explain how to use it in actual practice.\n# import packages. import argparse import time as t from tqdm import tqdm from pathlib import Path # Get the directory of the current file. FILE = Path(__file__).resolve() ROOT = FILE.parents[0].resolve() # Create a folder named \"records\" if there isn't one. records = ROOT / \"records\" if not records.exists(): print(\"Records folder not detected! Creating folder...\") records.mkdir() print(\"Records folder creating complete!\") # The function that is designed to take in the arguments. def parse_args(): parser = argparse.ArgumentParser(description='Example 3 for argparse') parser.add_argument(\"-e\", \"--epochs\", default=5, type=int, help=\"Number of epoch you want to run\") parser.add_argument(\"-i\", \"--iterations\", default=100, type=int, help=\"Number of iterations you want to run in each epoch\") parser.add_argument(\"-t\", \"--time\", default=0.03, type=float, help=\"Time you want each iteration in an epoch to run\") parser.add_argument(\"--save-txt\", action=\"store_true\", help=\"Whether Save record to a txt file\") opt = parser.parse_args() return opt # Example code for training the model with simplified process using tqdm. def train_model(epochs, iterations, time, save_txt): for epoch in range(epochs): for _ in tqdm(range(iterations), desc=\"Epoch {}\".format(epoch + 1)): t.sleep(time) # The function that will save the configuration of the current training process # and save them with the time consumed in a txt file. def save_record(epochs, iterations, time, total_time): if len(list(records.glob(\"*\"))) == 0: (records / \"1.txt\").write_text(f\"Epoch {epochs}, Iterations {iterations}, Time for each iteration: {time}s, \" f\"Total time: {total_time:.2f}s\") return \"1.txt\" else: files = records.glob(\"*\") last_file = list(files)[0] integer = int(last_file.name.split('.')[0]) (records / f\"{integer + 1}.txt\").write_text( f\"Epoch {epochs}, Iterations {iterations}, Time for each iteration: {time}s, \" f\"Total time: {total_time:.2f}s\") return f\"{integer + 1}.txt\" # The main function which deals with the logic of the program. def main(): opt = parse_args() print(f\"Argument confirm: [{opt.epochs}] epochs, [{opt.iterations}] iterations, [{opt.time}] time, [{opt.save_txt}] save record.\") print(\"Start training in 3s...\") t.sleep(3) print(\"Start now!\") start_time = t.time() train_model(**vars(opt)) end_time = t.time() total_time = end_time - start_time print(f\"Total time: {total_time:.2f}s.\") if opt.save_txt: print(f\"Saving record to records folder...\") file_name = save_record(vars(opt)[\"epochs\"], vars(opt)[\"iterations\"], vars(opt)[\"time\"], total_time) print(f\"Saving complete to {file_name}!\") print(\"End training!\") # Call the main function once the program runs. if __name__ == \"__main__\": main() It can be noticed that in the parse_args function, we add a new line:\nparser.add_argument(\"--save-txt\", action=\"store_true\", help=\"Whether Save record to a txt file\") where its action is \"store_true\". This means that if the user add --save-text in the terminal while calling this python file, the value of the argument save_text will be set to True. Hence, following the main function’s logic, whether the program will call save_record will depend on the input of the user.\nIn this example, we also replace manual progress bar printing with tqdm and integrate pathlib into the file for routing of the diretory. After running the file with --save-text added, the outputs of the file will be:\nAnd calling the file with the same argument for multiple times will let the program name the txt file with the integer value increasing:\nThe directory and the txt file content will be:\n2.4 Example 4 The emphasis of this example targets at how to check what configuration can we change and how to parse the argument into the file. This time, we are going to use real re-usable file to further enhance our understanding. The repositary that we are going to use is here, where detect.py is the file that we want to use. Without diving into the actual source code, we can take a look at the argument of the file that we can configure by using the -h or --help argument:\nThis brief description is enough for us to know the usage of the file and the options that we can set without looking into the actual code. In our case, we need to use this file to accomplish object detection, so the only argument that we need to specify is --source, followed by the source that we want the program to detect. I’ve already trained the model to recognize Minecraft player and use that weights as the default weights value, so there’s no need to specify it here. After running the script, the program will begin detecting object in the source according to our input string of the position of the source frame by frame.\nThe output can be found here, with preview down below:\n3. Conclusion argparse is really a great module that makes our life easier, ranging from the perspective of time-saving property to nature of user-friendly. I believe that after my introduction and examples, everyone will love this module and utilize it in actual production environment!\n",
  "wordCount" : "2043",
  "inLanguage": "en",
  "datePublished": "2024-03-08T07:38:30-05:00",
  "dateModified": "2024-03-08T07:38:30-05:00",
  "author":{
    "@type": "Person",
    "name": "Banghao Chi"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://biboyqg.github.io/blog/blog/argparse/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Banghao's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://biboyqg.github.io/blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://biboyqg.github.io/blog/" accesskey="h" title="Banghao&#39;s Blog (Alt + H)">Banghao&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://biboyqg.github.io/blog/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://biboyqg.github.io/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://biboyqg.github.io/blog/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://biboyqg.github.io/" title="Home Page">
                    <span>Home Page</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Argparse: a user-friendly tool to write CLI interface
    </h1>
    <div class="post-meta"><span title='2024-03-08 07:38:30 -0500 -0500'>March 8, 2024</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Banghao Chi

</div>
  </header> 
  <div class="post-content"><h4 id="1-introduction">1. Introduction<a hidden class="anchor" aria-hidden="true" href="#1-introduction">#</a></h4>
<p>Hello fellows! Today I&rsquo;m excited to share insights about the <code>argparse</code> module, a robust and intuitive tool for creating command-line interfaces in Python. What makes <code>argparse</code> particularly fascinating to me is its ability to enable users to quickly leverage Python scripts with custom configurations and functionalities, without the need to dive into the underlying source code. This feature of <code>argparse</code> has captured my interest and again, showcasing its value in making Python files reusable and accessible for diverse applications.</p>
<p>By utilizing this module, individuals who frequently work with reusable Python files can significantly save their time. It simplifies the configuration of these files without the need for in-depth analysis, which is vital for tasks such as data processing, cleaning, and even AI model training since once their workflows are established, changes of these files are typically limited to data positioning and manipulation methods. Hence, I believe all of us will find this module invaluable for enhancing efficiency in our operations.</p>
<h4 id="2-examples">2. Examples<a hidden class="anchor" aria-hidden="true" href="#2-examples">#</a></h4>
<p>To quickly acquaint you guys with this module, I&rsquo;ll demonstrate through three concise examples designed to progressively enhance your understanding. As we move from basic to more complex scenarios, you&rsquo;ll gain valuable knowledge about <code>argparse</code> and, ultimately, master the key concepts such as:</p>
<ul>
<li>How we can design desired interfaces that fulfill our purpose.</li>
<li>How to let arguments parsed into the file to be utilized in other functions calls.</li>
<li>How to parse arguments into the file from terminal.</li>
<li>How to integrate and create a streamline process for the arguments flow using argparse.</li>
</ul>
<h5 id="21-example-1">2.1 Example 1<a hidden class="anchor" aria-hidden="true" href="#21-example-1">#</a></h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># import the module.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> argparse
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The function that is designed to take in the arguments.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse_args</span>():
</span></span><span style="display:flex;"><span>    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Example 1 for design in argparse&#39;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-d&#34;</span>, <span style="color:#e6db74">&#34;--data&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pokemon_names_and_descriptions.csv&#34;</span>,
</span></span><span style="display:flex;"><span>                        type<span style="color:#f92672">=</span>str,  help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Path to csv file&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-f&#34;</span>, <span style="color:#e6db74">&#34;--fill&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;average&#34;</span>, type<span style="color:#f92672">=</span>str,
</span></span><span style="display:flex;"><span>                        choices<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;average&#34;</span>, <span style="color:#e6db74">&#34;max&#34;</span>, <span style="color:#e6db74">&#34;min&#34;</span>, <span style="color:#e6db74">&#34;median&#34;</span>], help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Fillna method&#34;</span>)
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> opt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Then call this function to utilize the arguments obtained.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parse_args()
</span></span><span style="display:flex;"><span>    print(opt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the main function once the program runs.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># outputs: Namespace(data=&#39;pokemon_names_and_descriptions.csv&#39;, fill=&#39;average&#39;)</span>
</span></span></code></pre></div><p>In this example, we are going to learn how to design desired interfaces that fulfill our purpose starting with this small snippet of code. Typically, we define an extra function that will take in the value that are parsed in to the file, and call that function in our <code>main</code> function to get all the arguments.</p>
<p>Inside the <code>parse_args()</code> function, we first instanciate a <code>parser</code> object using <code>argparse</code>&rsquo;s ArgumentParser method so that we can configure the parser and add argument to it in the following lines. The description argument inside it is used to provide the individuals who want to use this python file with a small description text, which will be illustrated more later.</p>
<p>After the instantiation, we can configure the <code>parser</code> object by using its <code>add_argument()</code> method. Inside this method, there will be 7 main parameters that we need to specify:</p>
<ul>
<li><code>name_or_flags</code>: Either the name of the argument or a list of strings (which is optional).</li>
<li><code>action</code>: The action that you want the program to carry out once it receives the argument from outside.</li>
<li><code>default</code>: The default value of the argument if not data is parsed in the file with respect to this argument.</li>
<li><code>type</code>: The type that you want the argument to be converted to once it is received by the program.</li>
<li><code>choices</code>: A list of the allowable values for the argument.</li>
<li><code>required</code>: Whether this argument is optional or required.</li>
<li><code>help</code>: A brief description text to show what the argument does.</li>
</ul>
<p>Among these 7 parameters, I&rsquo;ll list a two bullet points to help you understand how to use these to create your own interfaces:</p>
<ul>
<li>There are two types of string values that we can fill in <code>name_or_flags</code>, positional argument (which require an input from the user) and optional argument, where optional argument usually start with <code>-</code> or <code>--</code> plus the name that you want and positional argument just with the name that you want.</li>
<li>The default value of <code>action</code> would be <code>&quot;store&quot;</code> which simply just store the value that the user parse in. Another value of <code>action</code> that we usually use is <code>&quot;store_true&quot;</code>, which means if the user parse this argument (the one that are filled in <code>name_or_flags</code>), then its value will be true (further explained in the second example).</li>
</ul>
<p>After absorb all the fundamental knowledge we can take a look at the place where we add our arguments.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  	parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-d&#34;</span>, <span style="color:#e6db74">&#34;--data&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pokemon_names_and_descriptions.csv&#34;</span>,
</span></span><span style="display:flex;"><span>                        type<span style="color:#f92672">=</span>str,  help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Path to csv file&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-f&#34;</span>, <span style="color:#e6db74">&#34;--fill&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;average&#34;</span>, type<span style="color:#f92672">=</span>str,
</span></span><span style="display:flex;"><span>                        choices<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;average&#34;</span>, <span style="color:#e6db74">&#34;max&#34;</span>, <span style="color:#e6db74">&#34;min&#34;</span>, <span style="color:#e6db74">&#34;median&#34;</span>], help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Fillna method&#34;</span>)
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># outputs: Namespace(data=&#39;pokemon_names_and_descriptions.csv&#39;, fill=&#39;average&#39;)</span>
</span></span></code></pre></div><p>The first line means that we add an argument named <code>-d</code> or <code>--data</code>. We then provide the default value, the type of the argument and a text that helps to describe this argument. The second line is similar, except that it limits the allowable values for this argument.</p>
<p>The outputs are a <code>Namespace</code>, which is an unique type in this module. The values inside of this object will be the values that the user parse in with respect to each argument, but some of they will be default if the user doesn&rsquo;t parse the value of some argument into the file. What&rsquo;s more, in case you are not familiar with with this <code>Namespace</code> object, we can transform it into a dictionary, which will be explained later in the following example.</p>
<p>After the completion of the configuration, we can get all the arguments using <code>parse_args()</code> method, and utilize them for further use.</p>
<h5 id="22-example-2">2.2 Example 2<a hidden class="anchor" aria-hidden="true" href="#22-example-2">#</a></h5>
<p>In this example, we focus on illustrating how to utilize the arguments obtained from the last example and bring them into actual practice.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># import the modules.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> argparse
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time <span style="color:#66d9ef">as</span> t
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The function that is designed to take in the arguments.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse_args</span>():
</span></span><span style="display:flex;"><span>    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Example 2 for using args in argparse&#39;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-e&#34;</span>, <span style="color:#e6db74">&#34;--epochs&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>                        type<span style="color:#f92672">=</span>int, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number of epoch you want to run&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-i&#34;</span>, <span style="color:#e6db74">&#34;--iterations&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, type<span style="color:#f92672">=</span>int,
</span></span><span style="display:flex;"><span>                        help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number of iterations you want to run in each epoch&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-t&#34;</span>, <span style="color:#e6db74">&#34;--time&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">0.03</span>, type<span style="color:#f92672">=</span>float,
</span></span><span style="display:flex;"><span>                        help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Time you want each iteration in an epoch to run&#34;</span>)
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> opt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example code for training the model.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">train_model</span>(epochs, iterations, time):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> epoch <span style="color:#f92672">in</span> range(epochs):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> iteration <span style="color:#f92672">in</span> range(iterations):
</span></span><span style="display:flex;"><span>            t<span style="color:#f92672">.</span>sleep(time)
</span></span><span style="display:flex;"><span>            rate <span style="color:#f92672">=</span> (iteration <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)<span style="color:#f92672">/</span>iterations
</span></span><span style="display:flex;"><span>            process <span style="color:#f92672">=</span> int(rate<span style="color:#f92672">*</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>            a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;*&#34;</span> <span style="color:#f92672">*</span> process
</span></span><span style="display:flex;"><span>            b <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;.&#34;</span> <span style="color:#f92672">*</span> (<span style="color:#ae81ff">50</span> <span style="color:#f92672">-</span> process)
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\r</span><span style="color:#e6db74">Epoch: </span><span style="color:#e6db74">{</span>epoch <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> [</span><span style="color:#e6db74">{</span>a<span style="color:#e6db74">}</span><span style="color:#e6db74">-&gt;</span><span style="color:#e6db74">{</span>b<span style="color:#e6db74">}</span><span style="color:#e6db74">] </span><span style="color:#e6db74">{</span>int(rate<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">%&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>        print()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the parse_args function to utilize</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the arguments obtained in train_model function.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parse_args()
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Argument confirm: [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>epochs<span style="color:#e6db74">}</span><span style="color:#e6db74">] epochs, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>iterations<span style="color:#e6db74">}</span><span style="color:#e6db74">] iterations, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>time<span style="color:#e6db74">}</span><span style="color:#e6db74">] time&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Start training in 3s...&#34;</span>)
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Start now!&#34;</span>)
</span></span><span style="display:flex;"><span>    train_model(<span style="color:#f92672">**</span>vars(opt))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;End training!&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the main function once the program runs.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><p>In the last example, we mention that most of us are not familiar with <code>Namespace</code> object, and therefore we need to find a way to transform it into common data structure like dictionary in Python to make use of it.</p>
<p>It turns out that there&rsquo;s a built-in method <code>vars</code> which will calls the <code>__dict__</code> method in the corresponding object to transform it into dictionary and return it. If we print <code>vars(opt)</code> in the main function, the outputs will be something like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># outputs: {&#39;epochs&#39;: 5, &#39;iterations&#39;: 100, &#39;time&#39;: 0.03}</span>
</span></span></code></pre></div><p>Since <code>Namespace</code> is also a dict-liked object, we can access its member value by using <code>.</code> like this line of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Argument confirm: [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>epochs<span style="color:#e6db74">}</span><span style="color:#e6db74">] epochs, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>iterations<span style="color:#e6db74">}</span><span style="color:#e6db74">] iterations, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>time<span style="color:#e6db74">}</span><span style="color:#e6db74">] time&#34;</span>)
</span></span></code></pre></div><p>Then we can parse the dictionary as argument using <code>**</code> operation, which is often referred as &ldquo;<em>Unpacking function arguments</em>&rdquo; into the goal function. Here, we parse the arguments obtained into <code>train_model</code> using <code>train_model(**vars(opt))</code>.`</p>
<p>With <code>\r</code> functionality in print, we can achieve the outputs of the Example 2 as follow once we run the file in the terminal:</p>
<p><img loading="lazy" src="../assets/image-20240310165851738.png" alt="image-20240310165851738"  />
</p>
<h5 id="23-example-3">2.3 Example 3<a hidden class="anchor" aria-hidden="true" href="#23-example-3">#</a></h5>
<p>In this section we mainly focus on introducing the use of <code>store_true</code> and explain how to use it in actual practice.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># import packages.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> argparse
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time <span style="color:#66d9ef">as</span> t
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tqdm <span style="color:#f92672">import</span> tqdm
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pathlib <span style="color:#f92672">import</span> Path
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the directory of the current file.</span>
</span></span><span style="display:flex;"><span>FILE <span style="color:#f92672">=</span> Path(__file__)<span style="color:#f92672">.</span>resolve()
</span></span><span style="display:flex;"><span>ROOT <span style="color:#f92672">=</span> FILE<span style="color:#f92672">.</span>parents[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>resolve()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create a folder named &#34;records&#34; if there isn&#39;t one.</span>
</span></span><span style="display:flex;"><span>records <span style="color:#f92672">=</span> ROOT <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;records&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> records<span style="color:#f92672">.</span>exists():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Records folder not detected! Creating folder...&#34;</span>)
</span></span><span style="display:flex;"><span>    records<span style="color:#f92672">.</span>mkdir()
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Records folder creating complete!&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The function that is designed to take in the arguments.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse_args</span>():
</span></span><span style="display:flex;"><span>    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Example 3 for argparse&#39;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-e&#34;</span>, <span style="color:#e6db74">&#34;--epochs&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, type<span style="color:#f92672">=</span>int, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number of epoch you want to run&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-i&#34;</span>, <span style="color:#e6db74">&#34;--iterations&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>, type<span style="color:#f92672">=</span>int,
</span></span><span style="display:flex;"><span>                        help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Number of iterations you want to run in each epoch&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-t&#34;</span>, <span style="color:#e6db74">&#34;--time&#34;</span>, default<span style="color:#f92672">=</span><span style="color:#ae81ff">0.03</span>, type<span style="color:#f92672">=</span>float,
</span></span><span style="display:flex;"><span>                        help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Time you want each iteration in an epoch to run&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;--save-txt&#34;</span>, action<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;store_true&#34;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Whether Save record to a txt file&#34;</span>)
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> opt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example code for training the model with simplified process using tqdm.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">train_model</span>(epochs, iterations, time, save_txt):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> epoch <span style="color:#f92672">in</span> range(epochs):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> tqdm(range(iterations), desc<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Epoch </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(epoch <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)):
</span></span><span style="display:flex;"><span>            t<span style="color:#f92672">.</span>sleep(time)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The function that will save the configuration of the current training process</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># and save them with the time consumed in a txt file.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">save_record</span>(epochs, iterations, time, total_time):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(list(records<span style="color:#f92672">.</span>glob(<span style="color:#e6db74">&#34;*&#34;</span>))) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        (records <span style="color:#f92672">/</span> <span style="color:#e6db74">&#34;1.txt&#34;</span>)<span style="color:#f92672">.</span>write_text(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Epoch </span><span style="color:#e6db74">{</span>epochs<span style="color:#e6db74">}</span><span style="color:#e6db74">, Iterations </span><span style="color:#e6db74">{</span>iterations<span style="color:#e6db74">}</span><span style="color:#e6db74">, Time for each iteration: </span><span style="color:#e6db74">{</span>time<span style="color:#e6db74">}</span><span style="color:#e6db74">s, &#34;</span>
</span></span><span style="display:flex;"><span>                                       <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Total time: </span><span style="color:#e6db74">{</span>total_time<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;1.txt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        files <span style="color:#f92672">=</span> records<span style="color:#f92672">.</span>glob(<span style="color:#e6db74">&#34;*&#34;</span>)
</span></span><span style="display:flex;"><span>        last_file <span style="color:#f92672">=</span> list(files)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        integer <span style="color:#f92672">=</span> int(last_file<span style="color:#f92672">.</span>name<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;.&#39;</span>)[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>        (records <span style="color:#f92672">/</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>integer <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span>)<span style="color:#f92672">.</span>write_text(
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Epoch </span><span style="color:#e6db74">{</span>epochs<span style="color:#e6db74">}</span><span style="color:#e6db74">, Iterations </span><span style="color:#e6db74">{</span>iterations<span style="color:#e6db74">}</span><span style="color:#e6db74">, Time for each iteration: </span><span style="color:#e6db74">{</span>time<span style="color:#e6db74">}</span><span style="color:#e6db74">s, &#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Total time: </span><span style="color:#e6db74">{</span>total_time<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>integer <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.txt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The main function which deals with the logic of the program.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    opt <span style="color:#f92672">=</span> parse_args()
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Argument confirm: [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>epochs<span style="color:#e6db74">}</span><span style="color:#e6db74">] epochs, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>iterations<span style="color:#e6db74">}</span><span style="color:#e6db74">] iterations, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>time<span style="color:#e6db74">}</span><span style="color:#e6db74">] time, [</span><span style="color:#e6db74">{</span>opt<span style="color:#f92672">.</span>save_txt<span style="color:#e6db74">}</span><span style="color:#e6db74">] save record.&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Start training in 3s...&#34;</span>)
</span></span><span style="display:flex;"><span>    t<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Start now!&#34;</span>)
</span></span><span style="display:flex;"><span>    start_time <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>time()
</span></span><span style="display:flex;"><span>    train_model(<span style="color:#f92672">**</span>vars(opt))
</span></span><span style="display:flex;"><span>    end_time <span style="color:#f92672">=</span> t<span style="color:#f92672">.</span>time()
</span></span><span style="display:flex;"><span>    total_time <span style="color:#f92672">=</span> end_time <span style="color:#f92672">-</span> start_time
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Total time: </span><span style="color:#e6db74">{</span>total_time<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> opt<span style="color:#f92672">.</span>save_txt:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Saving record to records folder...&#34;</span>)
</span></span><span style="display:flex;"><span>        file_name <span style="color:#f92672">=</span> save_record(vars(opt)[<span style="color:#e6db74">&#34;epochs&#34;</span>], vars(opt)[<span style="color:#e6db74">&#34;iterations&#34;</span>], vars(opt)[<span style="color:#e6db74">&#34;time&#34;</span>], total_time)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Saving complete to </span><span style="color:#e6db74">{</span>file_name<span style="color:#e6db74">}</span><span style="color:#e6db74">!&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;End training!&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Call the main function once the program runs.</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><p>It can be noticed that in the <code>parse_args</code> function, we add a new line:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>		parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;--save-txt&#34;</span>, action<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;store_true&#34;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Whether Save record to a txt file&#34;</span>)
</span></span></code></pre></div><p>where its <code>action</code> is <code>&quot;store_true&quot;</code>. This means that if the user add <code>--save-text</code> in the terminal while calling this python file, the value of the argument <code>save_text</code> will be set to <code>True</code>. Hence, following the main function&rsquo;s logic, whether the program will call <code>save_record</code> will depend on the input of the user.</p>
<p>In this example, we also replace manual progress bar printing with <code>tqdm</code> and integrate <code>pathlib</code> into the file for routing of the diretory. After running the file with <code>--save-text</code> added, the outputs of the file will be:</p>
<p><img loading="lazy" src="../assets/image-20240310165953059.png" alt="image-20240310165953059"  />
</p>
<p>And calling the file with the same argument for multiple times will let the program name the txt file with the integer value increasing:</p>
<!-- raw HTML omitted -->
<p>The directory and the txt file content will be:</p>
<!-- raw HTML omitted -->
<h5 id="24-example-4">2.4 Example 4<a hidden class="anchor" aria-hidden="true" href="#24-example-4">#</a></h5>
<p>The emphasis of this example targets at how to check what configuration can we change and how to parse the argument into the file. This time, we are going to use real re-usable file to further enhance our understanding. The repositary that we are going to use is <a href="https://github.com/ultralytics/yolov5">here</a>, where <code>detect.py</code> is the file that we want to use. Without diving into the actual source code, we can take a look at the argument of the file that we can configure by using the <code>-h</code> or <code>--help</code> argument:</p>
<!-- raw HTML omitted -->
<p>This brief description is enough for us to know the usage of the file and the options that we can set without looking into the actual code. In our case, we need to use this file to accomplish object detection, so the only argument that we need to specify is <code>--source</code>, followed by the source that we want the program to detect. I&rsquo;ve already trained the model to recognize Minecraft player and use that weights as the default <code>weights</code> value, so there&rsquo;s no need to specify it here. After running the script, the program will begin detecting object in the source according to our input string of the position of the source frame by frame.</p>
<p><img loading="lazy" src="../assets/image-20240309144528074.png" alt="image-20240309144528074"  />
</p>
<p>The output can be found <a href="https://www.youtube.com/watch?v=Rdcop7fn6ro&amp;t=375s">here</a>, with preview down below:</p>
<p><img loading="lazy" src="../assets/image-20240309150809788.png" alt="image-20240309150809788"  />
</p>
<h4 id="3-conclusion">3. Conclusion<a hidden class="anchor" aria-hidden="true" href="#3-conclusion">#</a></h4>
<p><code>argparse</code> is really a great module that makes our life easier, ranging from the perspective of time-saving property to nature of user-friendly. I believe that after my introduction and examples, everyone will love this module and utilize it in actual production environment!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://biboyqg.github.io/blog/tags/argparse/">Argparse</a></li>
      <li><a href="https://biboyqg.github.io/blog/tags/yolov5/">Yolov5</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://biboyqg.github.io/blog/blog/catseg/">
    <span class="title">« Prev</span>
    <br>
    <span>CATseg: A complete walk through of the model architecture</span>
  </a>
  <a class="next" href="https://biboyqg.github.io/blog/blog/chess/">
    <span class="title">Next »</span>
    <br>
    <span>Real-time Object Recognition in Chess: Personalized Tuning and Hardware Acceleration</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    <footer class="footer">
  <span
    >&copy; 2025
    <a href="https://biboyqg.github.io/blog/">Banghao&#39;s Blog</a></span
  >
</footer>
</body>

</html>
